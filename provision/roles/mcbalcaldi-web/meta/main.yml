---
dependencies:
  - role: geerlingguy.git
    become: yes
  - role: geerlingguy.apache
    vars:
      apache_mods_enabled:
        - alias.load
        - proxy.load
        - proxy_http.load
        - ssl.load
        - rewrite.load
    become: yes
  - role: geerlingguy.php
    become: yes
    vars:
      php_packages:
        - libapache2-mod-fcgid
        - libapache2-mod-php7.2
        - php-apcu
        - php7.2-xml
        - php7.2-gd
        - php7.2-mysql
        - php7.2-json
        - php7.2-curl
        - php7.2-mbstring
        - php7.2-zip
        - unzip
  - role: geerlingguy.composer
    become: yes
  - role: tls
    vars:
      ca_cert: "{{ project_root }}/ca.crt"
      ca_cert_key: "{{ project_root }}/ca.key"
    become: yes
  - role: checkout
    when: runtime_environment == "production"
